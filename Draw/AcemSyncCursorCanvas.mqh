//+------------------------------------------------------------------+
//|                                              AcemGhostCursor.mqh |
//|                                  Copyright 2023, MetaQuotes Ltd. |
//|                                             https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright "Copyright 2023, MetaQuotes Ltd."
#property link      "https://www.mql5.com"
#property version   "1.00"
#property strict

#include <Acem/Draw/AcemBaseCanvas.mqh>
#include <Acem/Common/AcemDefine.mqh>

class CAcemSyncCursorCanvas : public CAcemBaseCanvas
{
protected:
     CAcemSyncCursorCanvas(){};

public:
    CAcemSyncCursorCanvas(string canvasName);
    ~CAcemSyncCursorCanvas();
    bool init();

    bool setIcon();
};
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
CAcemSyncCursorCanvas::CAcemSyncCursorCanvas(string canvasName) : CAcemBaseCanvas(canvasName)
{
}
//+------------------------------------------------------------------+
//|                                                                  |
//+------------------------------------------------------------------+
CAcemSyncCursorCanvas::~CAcemSyncCursorCanvas()
{
}
//+------------------------------------------------------------------+
bool CAcemSyncCursorCanvas::init()
{
    if (ObjectFind(ChartID(), m_canvasName) >= 0) {
        ObjectDelete(ChartID(), m_canvasName);
    }
    if (!CreateBitmapLabel(m_canvasName, 0, 0, 14, 20, COLOR_FORMAT_ARGB_NORMALIZE))
    {
        return (false);
    }
    ObjectSetInteger(0, m_canvasName, OBJPROP_CORNER, CORNER_LEFT_UPPER);
    ObjectSetInteger(0, m_canvasName, OBJPROP_ANCHOR, ANCHOR_LEFT_UPPER);
    ObjectSetInteger(0, m_canvasName, OBJPROP_BACK, false);

    setIcon();
    Update();
    return true;
}

bool CAcemSyncCursorCanvas::setIcon()
{
    uint aFig[20 * 14] = {
        0x00000000,0xA0d1d2d2,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA01a1b1b,0xA0d1d2d2,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0b9bbba,0xA0939494,0xA0939494,0xA0939494,0xA01a1b1b,0xA01a1b1b,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA0fafcfb,0xA01a1b1b,0xA0393939,0xA0595a5a,0xA0595a5a,0xA0595a5a,0xA0777877,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0494949,0xA0676867,0xA0fafcfb,0xA0fafcfb,0xA0777877,0xA0595a5a,0x00000000,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0fafcfb,0xA0494949,0xA0494949,0xA01a1b1b,0xA0c5c7c6,0xA0fafcfb,0xA0d1d2d2,0xA01a1b1b,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0494949,0xA0494949,0x00000000,0xA0676867,0xA0676867,0xA0fafcfb,0xA0fafcfb,0xA0595a5a,0xA0777877,0x00000000,0x00000000,0x00000000,
        0xA0d1d2d2,0xA01a1b1b,0xA0494949,0x00000000,0x00000000,0xA0c5c7c6,0xA01a1b1b,0xA0fafcfb,0xA0fafcfb,0xA0858686,0xA01a1b1b,0x00000000,0x00000000,0x00000000,
        0x00000000,0xA0d1d2d2,0x00000000,0x00000000,0x00000000,0x00000000,0xA0595a5a,0xA0595a5a,0xA0393939,0xA0292a29,0xA0939494,0x00000000,0x00000000,0x00000000,
        0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xA0595a5a,0xA0595a5a,0xA0939494,0x00000000,0x00000000,0x00000000,0x00000000};
    ArrayCopy(m_pixels, aFig);
    Update();

    return true;
}
